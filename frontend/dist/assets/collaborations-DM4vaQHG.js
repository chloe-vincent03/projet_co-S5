import{l as V,m as j,r as i,n as L,o as A,c as s,d as t,h as w,i as p,p as g,q as P,v as h,F as k,s as C,x as S,k as o,b as x,w as T,I as D,t as u}from"./index-BDoNwdHv.js";const N={class:"px-8 lg:px-12 py-12"},U={class:"flex flex-wrap items-center justify-start gap-4 mb-12"},M={class:"flex items-center gap-2"},B={class:"flex items-center gap-2"},E={class:"flex items-center gap-2"},F={class:"flex items-center gap-2"},I={class:"flex items-center gap-2"},R={key:0,class:"text-center"},Z={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},$={class:"flex gap-2 h-48"},q=["src"],G=["src"],H={key:2,class:"w-full h-full flex items-center justify-center text-blue-500"},z={key:0,class:"text-4xl"},J={key:1,class:"text-xl font-['PlumePixel']"},K={class:"w-1/4 h-full flex flex-col gap-2"},O=["src"],Q={key:1,class:"w-full h-full flex items-center justify-center text-blue-300"},W={key:0,class:"text-xl"},X={key:1,class:"text-xs"},Y={key:0,class:"h-full w-full bg-gray-50 border border-dashed border-blue-200 flex items-center justify-center"},ee={class:"mt-2 text-sm"},te={class:"font-['PlumePixel'] text-lg truncate"},le={class:"flex justify-between text-gray-500 text-xs mt-1"},se={key:2,class:"text-center text-gray-500 mt-12"},ne={__name:"collaborations",setup(oe){V({title:"Collaborations"}),j();const y=i([]),b=i(!0),r=i("date-desc"),m=i("all"),f=i(""),v=i(""),d=i("all"),_=L(()=>{let n=[...y.value];if(m.value!=="all"&&(n=n.filter(e=>e.type===m.value)),d.value!=="all"&&(n=n.filter(e=>e.status===d.value||!e.status&&d.value==="open")),f.value.trim()!==""){const e=f.value.toLowerCase();n=n.filter(a=>a.title&&a.title.toLowerCase().includes(e)||a.description&&a.description.toLowerCase().includes(e))}if(v.value.trim()!==""){const e=v.value.toLowerCase();n=n.filter(a=>a.username&&a.username.toLowerCase().includes(e)||a.children&&a.children.some(l=>l.username&&l.username.toLowerCase().includes(e)))}return n.sort((e,a)=>r.value==="date-desc"?new Date(a.created_at)-new Date(e.created_at):r.value==="date-asc"?new Date(e.created_at)-new Date(a.created_at):r.value==="title-asc"?e.title.localeCompare(a.title):r.value==="title-desc"?a.title.localeCompare(e.title):0),n});return A(async()=>{try{const n=await fetch("http://localhost:3000/api/media/threads",{credentials:"include"});n.ok&&(y.value=await n.json())}catch(n){console.error(n)}finally{b.value=!1}}),(n,e)=>{const a=S("router-link");return o(),s("div",N,[e[14]||(e[14]=t("h1",{class:"text-4xl font-['PlumePixel'] mb-8 text-left text-blue-plumepixel"},"Galerie des Collaborations",-1)),t("div",U,[t("div",M,[e[6]||(e[6]=t("label",{class:"text-sm font-medium"},"Trier :",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),class:"border border-blue-plumepixel px-2 py-1 text-sm bg-white focus:outline-none"},[...e[5]||(e[5]=[t("option",{value:"date-desc"},"Du + récent au + ancien",-1),t("option",{value:"date-asc"},"Du + ancien au + récent",-1),t("option",{value:"title-asc"},"Titre A → Z",-1),t("option",{value:"title-desc"},"Titre Z → A",-1)])],512),[[g,r.value]])]),t("div",B,[e[8]||(e[8]=t("label",{class:"text-sm font-medium"},"Nature :",-1)),p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>m.value=l),class:"border border-blue-plumepixel px-2 py-1 text-sm bg-white focus:outline-none"},[...e[7]||(e[7]=[P('<option value="all">Tous</option><option value="image">Images</option><option value="audio">Audio</option><option value="video">Vidéos</option><option value="text">Récit</option>',5)])],512),[[g,m.value]])]),t("div",E,[e[10]||(e[10]=t("label",{class:"text-sm font-medium"},"Statut :",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>d.value=l),class:"border border-blue-plumepixel px-2 py-1 text-sm bg-white focus:outline-none"},[...e[9]||(e[9]=[t("option",{value:"all"},"Tous",-1),t("option",{value:"open"},"En recherche",-1),t("option",{value:"in_progress"},"En cours",-1),t("option",{value:"finished"},"Terminé",-1)])],512),[[g,d.value]])]),t("div",F,[e[11]||(e[11]=t("label",{class:"text-sm font-medium"},"Auteur :",-1)),p(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>v.value=l),class:"border border-blue-plumepixel px-2 py-1 text-sm focus:outline-none",placeholder:"Nom d'utilisateur..."},null,512),[[h,v.value]])]),t("div",I,[e[12]||(e[12]=t("label",{class:"text-sm font-medium"},"Recherche :",-1)),p(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>f.value=l),class:"border border-blue-plumepixel px-2 py-1 text-sm focus:outline-none",placeholder:"Titre, description..."},null,512),[[h,f.value]])])]),b.value?(o(),s("div",R,"Chargement...")):(o(),s("div",Z,[(o(!0),s(k,null,C(_.value,l=>(o(),s("div",{key:l.id,class:"border border-blue-500 p-2 flex flex-col gap-2 bg-white shadow-sm hover:shadow-md transition"},[t("div",$,[x(a,{to:`/oeuvre/${l.id}`,class:"w-3/4 h-full relative group overflow-hidden bg-gray-100 border border-blue-200"},{default:T(()=>[l.type==="image"?(o(),s("img",{key:0,src:l.url,class:"w-full h-full object-cover"},null,8,q)):l.type==="video"?(o(),s("video",{key:1,src:l.url,class:"w-full h-full object-cover"},null,8,G)):(o(),s("div",H,[l.type==="audio"?(o(),s("span",z,[x(D)])):(o(),s("span",J,u(l.content),1))]))]),_:2},1032,["to"]),t("div",K,[(o(!0),s(k,null,C(l.children.slice(0,2),c=>(o(),s("div",{key:c.id,class:"h-1/2 w-full bg-gray-50 border border-blue-200 overflow-hidden relative"},[x(a,{to:`/oeuvre/${c.id}`,class:"block w-full h-full"},{default:T(()=>[c.type==="image"?(o(),s("img",{key:0,src:c.url,class:"w-full h-full object-cover"},null,8,O)):(o(),s("div",Q,[c.type==="audio"?(o(),s("span",W,[x(D)])):(o(),s("span",X,u(l.content),1))]))]),_:2},1032,["to"])]))),128)),l.children.length===0?(o(),s("div",Y,[...e[13]||(e[13]=[t("span",{class:"text-xs text-gray-300 text-center"},"Pas de réponse",-1)])])):w("",!0)])]),t("div",ee,[t("h2",te,u(l.title),1),t("div",le,[t("span",null,u(l.username)+" "+u(l.children_count>0?"+"+l.children_count:""),1),t("span",null,u(new Date(l.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})),1)])])]))),128))])),!b.value&&_.value.length===0?(o(),s("div",se," Aucune collaboration ne correspond à votre recherche. ")):w("",!0)])}}};export{ne as default};
